<?xml version="1.0" encoding="UTF-8"?>
<!-- cml节点各属性值 --> 
<!-- xmlns:xsi和xsi:noNamespaceSchemaLocation固定 --> 
<cml xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="PMC-1380.xsd">
 <!-- header节点各属性值 -->
 <!-- version固定；revision固定；其中version用于标识当前是否为驱动配置模块生成的xml文件。由驱动配置模块生成的xml文件该值固定为2.0，其他手动编辑得到的xml文件该值为1.0 -->
 <!-- author:编辑xml的作者；filename:xml的文件名，构成格式为“设备型号及版本.规约.xml” --> 
 <!-- filename:对于AnyPolling，规约固定为AnyPollingMaster；设备型号为PMC-53M，规约版本为V1.0，则文件名为“PMC-53MV10.AnyPollingMaster.xml” -->
 <header version = "1.0" revision = "1" author = "swc" filename = "PMC-53MV10.AnyPollingMaster.xml" />
 <!-- ied节点各属性值 -->
 <!-- type:设备类型； desc:设备描述； vendor:设备制造厂商； version:规约版本； date:编辑xml的日期； --> 
 <!-- driver:对应so的文件名  arg1: "0"代表设备采用一问一答的方式  "1"代表设备采用主动上送的方式--> 
 <!-- 不考虑校时 -->
 <ied type="PMC-53MV10" desc="PMC-53MV10装置" vendor="cet" version="1.0" date="2018-11-08" driver="syslibAnyPollingDrv030.so" arg1="0" >
  <!-- library节点各属性值 -->
  <!-- protocol:适用的通信规约，Anypolling规约固定为“AnyPollingMaster” -->
  <library protocol="AnyPollingMaster" >
	
	<!-- group节点各属性值 -->
	<!-- id:数据块序号，从0开始连续递增； name:数据块描述 -->
	
	<!-- 通信状态：与界面配置无关，固定存在的组 -->
	<!-- 虚遥信的group id可以灵活调整，但是必须保证xml文件中所有group id不能重复并且从0开始连续 -->
	<!-- group 的id满足从0开始连续递增条件，其他参数总是保持固定不变 -->
	<group id="0" name= "虚遥信" type="SPS" arg1="0" arg2="0" arg3="0" > 
		<data id="1" name="通信状态"	arg1="0" arg2="0" arg3="21930"/>
	</group> 
	
	<!-- 遥测 -->
	<!-- group节点各属性值 -->
	<!-- type:固定为“MV”； -->
	<!-- arg1:最低字节:ID开始字节(从1开始计数)；次低字节:ID占用字节数；次高字节:ID数据类型；最高字节:ID字节顺序，0表示顺序，1表示逆序 -->
	<!-- arg2:报文校验信息，最低字节:报文校验方式；次低字节:校验起始字节(从1开始计数)；次高字节:校验结束字节；最高字节:校验码的位置 （认为报文长度不超过255） -->
	<!-- arg3:采集轮询频率 -->
	
	<!-- arg4:接收报文ID校验信息，最低字节:是否校验ID，次低字节:ID开始字节(从1开始计数) ID占用字节数、数据类型、字节顺序都与发送报文保持一致，不再重复配置 -->
	<!-- arg5:接收报文长度校验信息，最低字节:是否校验长度；次低字节:接收报文长度(包括帧头)  -->
	<!-- arg6:接收报文固定值的校验信息，最低字节:是否需要校验固定值；次低字节:固定值起始位置；次高字节：固定值长度 (固定值配置在extend中)  -->
	<!-- arg7:接收报文的校验码信息，最低字节:报文校验方式；次低字节:校验起始字节(从1开始计数)；次高字节:校验结束字节；最高字节:校验码的位置 -->
	<!-- arg8:接收报文帧头校验信息，最低字节:是否需要校验帧头；次低字节:帧头长度 （帧头配置在extend中） -->
	<!-- extend:由“发送数据包; 固定值; 帧头”组成(发送数据包必须是一帧完整的报文)  -->
	
	<!-- ID数据类型(以ID占用字节数为2进行说明): -->
	<!-- 0：整型10进制数字，比如“123”，123=0x7B，则顺序为 00 7B，逆序为7B 00 -->
	<!-- 1：整型16进制数字，比如“123”，则顺序为01 23，逆序为23 01 -->
	<!-- 2：ASCII码，比如“12”，则顺序为31 32，逆序为32 31 -->
	<!-- 3：BCD码，比如“1234”，则顺序为12 34，逆序为34 12 -->
	
	<!-- 报文校验方式: -->
	<!-- 0：无校验 -->
	<!-- 1：SUM8 校验(和累加取最低一个字节) -->
	<!-- 2：SUM16校验(和累加取两个字节，低字节在前，高字节在后) -->
	<!-- 3：SUM16校验(和累加取两个字节，高字节在前，低字节在后) -->
	<!-- 4：Modbus RTU校验(CRC16 低字节在前，高字节在后) -->
	<!-- 5：Modbus RTU校验(CRC16 高字节在前，低字节在后) -->
	<!-- 6：取反加1(单个字节) ？？？？？？-->
	<!-- 7: CCITT(低字节在前，高字节在后) -->
	<!-- 8: 异或校验(单个字节) -->
	<!-- 9: LRC校验，先将ASCII校验数据转换合并为16进制，再进行LRC，最后把得到的16进制数拆分成2个ASCII码(高字节在前，低字节在后) -->
	<!-- 10:异或校验(单个字节)再将高位低位转为两个ASCII -->
	<!-- 11:LRC校验，直接进行LRC校验，再把得到的16进制数拆分成2个ASCII码(高字节在前，低字节在后) -->
	
	<group id="1" name ="遥测" type='MV' arg1="257" arg2="117833988" arg3="5" arg4="257" arg5="12545" arg6="66049" arg7="808386820" arg8="0" extend="01 03 9C 40 00 16 EB 80; 03;  " >
		<!-- data节点各属性值 -->
		<!-- id:从1开始连续递增； name:测点名称； unit:测点单位 -->
		<!-- arg1:字节偏移(从1开始计数)；arg2:数据类型； -->
        <!-- arg3: 字节顺序。 特殊情况：数据类型编码为501 则arg3 最低字节填分隔符对应的十进制编码 -->
        <!--                            数据类型编码为502 则arg3 最低字节填分隔符1对应的十进制编码 次低字节填分隔符2对应的十进制编码 -->
        <!--                            数据类型编码为503 则arg3 最低字节填分隔符1对应的十进制编码 次低字节填分隔符2对应的十进制编码  次高字节。。。-->
        <!--                            数据类型编码为504 则arg3 最低字节填分隔符1对应的十进制编码 次低字节填分隔符2对应的十进制编码  次高字节。。。 最高字节。。。-->
        <!-- arg4:乘系数； arg5:除系数； arg6:加常数；-->
        <!-- arg7:最低字节是否有数据状态 0表示无  1表示有数据状态  2表示数据有无效值   最高字节为数据解析前减去的值 如果原值就为0-->
        <!-- 如果有数据状态 ：arg7次低字节数据状态的掩码  次高字节 数据状态字节偏移-->
        <!-- 如果数据有无效值 ：次低字节放无效数据值的低位  次高字节放无效数据值的高位 -->
        <!-- arg10:测点代码  extend:计算公式 -->

		<!-- 字节顺序:界面配置的字节顺序字符串对应的十进制值，如字节顺序为“1234”，则arg2="1234" -->
		<!-- 计算公式：计算公式由变量、常数、运算符组成；var(N)对应某一个测点，对应关系为，表示测点自身时，N=0，否则N=groupID*256+dataID，其中用于计算的变量必须在该测点之前配置 -->
		<!-- 计算公式举例说明：该组中第10个测点――ABC三相电流之和 -->
		<!-- 测点代码:与数据字典中取值一致 -->
		
		<!-- 数据类型: -->
		<!-- 0：INT8 -->
		<!-- 1：UINT8 -->
		<!-- 2：INT16 -->
		<!-- 3：UINT16 -->
		<!-- 4：INT32 -->
		<!-- 5：UINT32 -->
		<!-- 6: FLOAT -->
		<!-- 7: DOUBLE -->
		<!-- 8: INT64 -->
		<!-- 9: UINT64 -->
        <!-- 10: 天信四字节特殊数据格式解析  -->
        <!-- 11: 天信六字节特殊数据格式解析  -->
		<!-- 101~111: ASCII码专用，直接将字节转成char，十进制表示；105表示数据长度为5个ascii码，数据长度可能为1~11，比如31 32 20 33 34表示数据值12.34  比如31 32 2E 33 34也表示数据值12.34 -->
		<!-- 121~131: ASCII码专用，直接将字节转成char，十六进制表示(按无符号整型解析)；124表示数据长度为4个ascii码，数据长度可能为1~11，比如31 32 33 34表示数据值0x1234=4660 -->
		<!-- 132: 先按128的格式，由ASCII解析成16进制表示，然后按FLOAT解析；数据长度为8 -->
		<!-- 201~210: BCD码，204表示数据长度为4个BCD码，比如12 34 56 78表示数据值12345678 -->
        <!-- 501~504: 单位数据长度不定长，通过分隔符确定长度  501代表分隔符只有一种 502分隔符两种  503分隔符三种 504分割符四种-->
		<data id="1"  name="A相电流"	unit="A"	arg1="36" arg2="6" arg3="1234" arg4="1" arg5="1000" arg6="0" arg10="" extend="" />
		<data id="2"  name="B相电流"	unit="A"	arg1="40" arg2="6" arg3="1234" arg4="1" arg5="1000" arg6="0" arg10="" extend="" />
		<data id="3"  name="C相电流"	unit="A"	arg1="44" arg2="6" arg3="1234" arg4="1" arg5="1000" arg6="0" arg10="" extend="" />
		<data id="4"  name="A相电压"	unit="V"	arg1="4" arg2="6" arg3="1234" arg4="1" arg5="100" arg6="0"  arg10="" extend="" />
		<data id="5"  name="B相电压"	unit="V"	arg1="8" arg2="6" arg3="1234" arg4="1" arg5="100" arg6="0"  arg10="" extend="" />
		<data id="6"  name="C相电压"	unit="V"	arg1="12" arg2="6" arg3="1234" arg4="1" arg5="100" arg6="0" arg10="" extend="" />
		<data id="7"  name="AB线电压"	unit="V"	arg1="20" arg2="6" arg3="1234" arg4="1" arg5="100" arg6="0" arg10="" extend="" />
		<data id="8"  name="BC线电压"	unit="V"	arg1="24" arg2="6" arg3="1234" arg4="1" arg5="100" arg6="0" arg10="" extend="" />
		<data id="9"  name="CA线电压"	unit="V"	arg1="28" arg2="6" arg3="1234" arg4="1" arg5="100" arg6="0" arg10="" extend="" />
		<data id="10"  name="三相电流之和" unit="A"	arg1="40" arg2="6" arg3="1234" arg4="1" arg5="1" arg6="0" arg10="" extend="var(769)+ var(770) + var(771)" />
	</group>
	
	<!-- 遥信 -->
	<!-- group节点各属性值 -->
	<!-- type:固定为“SPS”； -->
	<!-- arg1~arg8:和遥测保持一致；-->
	<!-- 40096开始，读2个寄存器，接收报文长度为9，采集轮询频率为1 -->
	<group id="2" name="遥信" type="SPS" arg1="257" arg2="117833988" arg3="1" arg4="257" arg5="2305" arg6="66049" arg7="134676740" arg8="0" extend="01 03 9C A0 00 02 EA 79; 03;  "   > 
		<!-- data节点各属性值 -->
		<!-- id:从1开始连续递增； name:测点名称； -->
		<!-- arg1:最低字节表示字节偏移；次低字节表示数据类型(或者说称之为数据单元更合适)，0表示1个字节16进制，1表示2个字节16进制，2表示2字节ASCII，3表示4字节ASCII 4表示1字节16进制减去0x33-->
        
        <!-- 数据类型  -->
		<!-- 0表示帧数据为十六进制1个字节  -->
		<!-- 1表示十六进制2个字节   -->
		<!-- 2表示两个ASCII转成1个字节的16进制  比如 0x31 0x32 则为 0x12  -->
		<!-- 3表示四个ASCII转成2个字节的16进制  比如 0x31 0x32 0x33 0x34 则为 0x1234 -->
        <!-- 4表示1字节16进制减去0x33 -->
        
		<!-- arg2:遥信模式，0表示单遥信，1表示双遥信 -->
		<!-- arg3:最低字节表示测点在寄存器中对应的位的最低位(一个字节的最低位从0开始)；次低字节表示测点值占用的bit数；高2字节固定为0 -->
		<!-- arg4:低2字节表示合位值，高2字节表示分位值；若为单点遥信，则分位值固定为0 -->
		<!-- arg10:测点代码; extend:计算公式，与遥测组一致 -->		
		<data id="1" name="DI1"		arg1="262" arg2="0" arg3="256" arg4="1" arg10="" extend="" /> 
		<data id="2" name="DI2"		arg1="262" arg2="0" arg3="257" arg4="1" arg10="" extend="" />			
		<data id="3" name="DO1"		arg1="260" arg2="0" arg3="256" arg4="1" arg10="" extend="" /> 
		<data id="4" name="DO2"		arg1="260" arg2="0" arg3="257" arg4="1" arg10="" extend="" />
	</group> 
	
	<!-- 电能 -->
	<!-- group节点各属性值 -->
	<!-- type:固定为“BCR”； -->
	<!-- arg参数:与遥测组一致 -->
	<group id="3" name="电能" type="BCR" arg1="257" arg2="117833988" arg3="10" arg4="257" arg5="6401" arg6="66049" arg7="404160772" arg8="0" extend="01 03 9C A4 00 0A AA 7E; 03;  "> 
		<!-- data节点各属性值 -->
		<!-- id:从1开始连续递增； name:测点名称； type:数据类型；unit:测点单位 -->
        <!-- arg参数:与遥测组一致 -->
		<data id="1" name="正向有功电能"	unit="kWh"	arg1="4" arg2="6" arg3="1234" arg4="1" arg5="10" arg6="0" arg10="" extend="" /> 
		<data id="2" name="正向无功电能"	unit="kvar"	arg1="16" arg2="6" arg3="1234" arg4="1" arg5="10" arg6="0" arg10="" extend="" />
		<data id="3" name="反向有功电能"	unit="kWh"	arg1="8" arg2="6" arg3="1234" arg4="1" arg5="10" arg6="0" arg10="" extend="" /> 
		<data id="4" name="反向无功电能"	unit="kvar"	arg1="20" arg2="6" arg3="1234" arg4="1" arg5="10" arg6="0" arg10="" extend="" /> 	
	</group> 	
  </library>
 </ied>
</cml>